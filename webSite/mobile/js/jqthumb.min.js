/*!
    jQThumb V2.2.0
    Copyright (c) 2013-2015
    Dual licensed under the MIT and GPL licenses.

    Author       : Pak Cheong
    Version      : 2.2.0
    Repo         : https://github.com/pakcheong/jqthumb
    Demo         : http://pakcheong.github.io/jqthumb/
    Last Updated : Friday, December 18th, 2015, 11:06:23 AM
    Requirements : jQuery >=v1.3.0 or Zepto (with zepto-data plugin) >=v1.0.0
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(a,b){window.console&&"undefined"!=typeof a&&a&&"undefined"!=typeof b&&b&&(a=a.toLowerCase(),"error"==a?console.error(b):"log"==a?console.log(b):console.error('"'+a+'" is not supported as console type.'))}function c(a){return a.toString().match(/\d+/)[0]}function d(a,b){var c=a.toString().match(/(-*)+\d+/)[0];return"px"==e(a)?0>a?0:a>b?b:a:"%"==e(a)?0>c?"0%":c>100?"100%":a:void 0}function e(b){var c=b.toString().match(/\d+(.*)/i);if(c)switch(a.trim(c[1])){case"":return"px";case"px":return"px";case"%":return"%"}}function f(b,c){this.element=b,this.settings=a.extend({},m,c),this.settings.width=this.settings.width.toString().replace(/px/gi,""),this.settings.height=this.settings.height.toString().replace(/px/gi,""),this.settings.position.y=d(this.settings.position.y,this.settings.width),this.settings.position.x=d(this.settings.position.x,this.settings.height),this.settings.zoom=this.settings.zoom<0?0:this.settings.zoom,"string"==typeof c?"kill"==c.toLowerCase()&&this.kill(this.element):(a(this.element).data(k,this.settings),this.init())}var g=function(){var a=document.createElement("div"),b="Khtml Ms O Moz Webkit".split(" ");b.length;return function(c){if(c in a.style)return!0;c=c.replace(/^[a-z]/,function(a){return a.toUpperCase()});for(var d in b)if(b[d]+c in a.style)return!0;return!1}}(),h="jqthumb",i=h+"-resize",j=h+"-original-styles",k=h+"-options",l={outputElems:[],inputElems:[]},m={classname:h,width:100,height:100,position:{x:"50%",y:"50%"},source:"src",responsive:20,zoom:1,show:!0,method:"auto",reinit:!0,before:function(){},after:function(){},done:function(){}};f.prototype={init:function(){var a=this.settings.method.toLowerCase();"auto"==a?g("backgroundSize")===!1?this["native"](this.element,this.settings):this.modern(this.element,this.settings):"modern"==a?this.modern(this.element,this.settings):"native"==a?this["native"](this.element,this.settings):b("error",'Invalid method. Only "auto", "modern" and "native" are allowed.')},kill:function(c){var d=a(c);if(d.data(h)){var e=[],f=d.prev();if(f.data(h)!==h)return b("error","Could not find the element. It is probably due to one or more element has been added right before the image element after the plugin initialization or it was removed."),!1;e=[],a.each(l.outputElems,function(b,c){a(c)[0]!=f[0]&&e.push(l.outputElems[b])}),l.outputElems=e,e=[],a.each(l.inputElems,function(b,c){a(c)[0]!=d[0]&&e.push(l.inputElems[b])}),l.inputElems=e,f.data(i)&&(a(window).unbind("resize",f.data(i)),f.removeData(i)),f.remove(),d.removeAttr("style"),"undefined"!=typeof d.data(j)&&(d.attr("style",d.data(j)),d.removeData(j)),"undefined"!=typeof d.data(h)&&d.removeData(h),"undefined"!=typeof d.data(k)&&d.removeData(k)}},"native":function(b,d){d.before.apply(b,[b]);var f=this,g=a(b),k=a("<img/>");g.data(j,g.attr("style")),g.hide(),k.bind("load",function(){var j={obj:k,size:{width:this.width,height:this.height}},l=(e(d.width),e(d.height),d.responsive),m=a(j.obj),n=a("<div />"),o=0,p=function(){setTimeout(function(){q()},l)},q=function(){var b=m.parent(),f=b.height(),g=b.width(),h=d.zoom,i=d.position.x,k=d.position.y;if(j.size.width>j.size.height?(m.css({width:"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:f+"px"}),o=m.height()/m.width(),m.width()<g?m.css({width:g*h,height:parseFloat(g*o)*h}):m.css({width:m.width()*h,height:parseFloat(m.width()*o)*h})):(m.css({width:g+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:"auto"}),o=m.width()/m.height(),m.height()<f&&m.css({width:parseFloat(f*o)*h,height:f*h})),d.zoom<1){var l=a("<div />"),n=d.width.toString(),p=d.height.toString(),q=e(n),r=e(p);l.css({width:parseFloat(c(n)*d.zoom)+q,height:parseFloat(c(p)*d.zoom)+r,position:"relative",overflow:"hidden"}).appendTo(m.parent()),m.appendTo(l)}m.css({position:"absolute",left:function(){var a=0;return"%"==e(i)?(a=parseFloat((m.width()-m.parent().width())/100*c(i)),0>=a?a+"px":"-"+a+"px"):"px"==e(i)||isNaN(i)===!1?c(i)+"px":void 0}(),top:function(){var a=0;return"%"==e(k)?(a=parseFloat((m.height()-m.parent().height())/100*c(k)),0>=a?a+"px":"-"+a+"px"):"px"==e(k)||isNaN(k)===!1?c(k)+"px":void 0}()})};n.insertBefore(g).append(m).css({position:"relative",overflow:"hidden",width:c(d.width)+e(d.width),height:c(d.height)+e(d.height)}).data(h,h),q(),!isNaN(l)&&l>0&&(n.data(i,p),a(window).bind("resize",n.data(i))),n.hide().addClass(d.classname),d.show===!0&&n.show(),d.after.apply(b,[n]),f.updateGlobal(b,n,d)}).attr("src",g.attr(d.source))},modern:function(b,d){d.before.apply(b,[b]);var f=this,g=a(b),i=a("<img />").attr("src",g.attr(d.source));g.data(j,g.attr("style")),g.hide(),a.each(i,function(i,j){var k=a(j);k.one("load",function(){var i=d.width,j=d.height,k=d.zoom,l=d.position.x,m=d.position.y,n=null,o=null;n=a("<div/>").css({width:c(i)+e(i),height:c(j)+e(j),display:"none",position:"relative",overflow:"hidden"}).addClass(d.classname).data(h,h),o=a("<div/>").css({width:"100%",height:"100%","background-image":'url("'+g.attr(d.source)+'")',"background-repeat":"no-repeat","background-position":c(l)+e(l)+" "+c(m)+e(m),"background-size":"cover"}).appendTo(n),n.insertBefore(a(b)),n.show(),o.css({width:parseFloat(100*k)+"%",height:parseFloat(100*k)+"%",position:"absolute"}).css({top:function(){var a=n.height(),b=o.height();return"%"==e(m)?"-"+parseFloat((b-a)/a*100/(100/c(m)))+"%":void 0}(),left:function(){var a=n.width(),b=o.width();return"%"==e(l)?"-"+parseFloat((b-a)/a*100/(100/c(l)))+"%":void 0}()}),n.hide(),d.show===!0&&n.show(),d.after.apply(b,[n]),f.updateGlobal(b,n,d)})})},updateGlobal:function(b,c,d){b.global.outputElems.push(a(c)[0]),b.global.elemCounter++,l.outputElems.push(a(c)[0]),b.global.elemCounter==b.global.inputElems.length&&d.done.apply(b,[b.global.outputElems])}},a.fn[h]=function(c){var d={},e={elemCounter:0,outputElems:[],inputElems:function(b){for(var c=a(b),d=c.length,e=[],f=0;d>f;f++)e.push(c.get(f));return e}(a(this))};return d[h]=function(c){return"undefined"==typeof c?void b("error","Please specify an action like $."+h+'("killall")'):(c=c.toLowerCase(),void("killall"==c&&a.each(l.inputElems,function(){new f(this,"kill")})))},a.extend(a,d),this.each(function(){var b=a(this);this.global=e,l.inputElems.push(b),"string"==typeof c?new f(this,c):b.data(h)?b.data(k)&&b.data(k).reinit===!0&&(new f(this,"kill"),b.data(h,new f(this,c))):b.data(h,new f(this,c))})}});